# FastAPI å­¦ä¹ é¡¹ç›® - å®Œæ•´æ€»ç»“

## ğŸ‰ é¡¹ç›®å·²å®Œæˆï¼

æ­å–œï¼ä½ å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ª**å®Œæ•´ã€åŠŸèƒ½é½å…¨ã€ç»“æ„æ¸…æ™°**çš„ FastAPI å­¦ä¹ é¡¹ç›®ã€‚

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

- âœ… **36 ä¸ªä¾èµ–åŒ…**å·²å®‰è£…
- âœ… **20+ ä¸ªæºä»£ç æ–‡ä»¶**
- âœ… **6 ç¯‡è¯¦ç»†æ–‡æ¡£**ï¼ˆçº¦ 15,000+ å­—ï¼‰
- âœ… **å®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**
- âœ… **RESTful API è®¾è®¡**
- âœ… **ä¸‰å±‚æ¶æ„å®ç°**

## ğŸ“ å®Œæ•´æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒåº”ç”¨ä»£ç  (`app/`)

#### ğŸ”Œ API å±‚
```
app/api/v1/
â”œâ”€â”€ endpoints/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ auth.py          # è®¤è¯ç«¯ç‚¹ï¼ˆæ³¨å†Œã€ç™»å½•ã€è·å–å½“å‰ç”¨æˆ·ï¼‰
â”‚   â””â”€â”€ users.py         # ç”¨æˆ·ç®¡ç†ç«¯ç‚¹ï¼ˆCRUDï¼‰
â”œâ”€â”€ __init__.py
â”œâ”€â”€ api.py               # è·¯ç”±èšåˆ
â””â”€â”€ deps.py              # ä¾èµ–æ³¨å…¥ï¼ˆæ•°æ®åº“ä¼šè¯ã€å½“å‰ç”¨æˆ·ï¼‰
```

**åŠŸèƒ½ï¼š**
- å¤„ç† HTTP è¯·æ±‚
- è·¯ç”±å®šä¹‰
- ä¾èµ–æ³¨å…¥
- å“åº”æ ¼å¼åŒ–

#### âš™ï¸ æ ¸å¿ƒé…ç½® (`core/`)
```
app/core/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†ï¼ˆä½¿ç”¨ pydantic-settingsï¼‰
â”œâ”€â”€ database.py          # æ•°æ®åº“è¿æ¥å’Œä¼šè¯ç®¡ç†
â””â”€â”€ security.py          # å®‰å…¨åŠŸèƒ½ï¼ˆå¯†ç å“ˆå¸Œã€JWTï¼‰
```

**åŠŸèƒ½ï¼š**
- ç¯å¢ƒå˜é‡é…ç½®
- æ•°æ®åº“è¿æ¥æ± 
- å¯†ç å“ˆå¸Œï¼ˆbcryptï¼‰
- JWT token ç”Ÿæˆå’ŒéªŒè¯

#### ğŸ’¾ æ•°æ®åº“å±‚ (`models/`)
```
app/models/
â”œâ”€â”€ __init__.py
â””â”€â”€ user.py              # ç”¨æˆ·æ¨¡å‹ï¼ˆSQLAlchemy ORMï¼‰
```

**åŠŸèƒ½ï¼š**
- å®šä¹‰æ•°æ®åº“è¡¨ç»“æ„
- ORM æ˜ å°„
- å…³ç³»å®šä¹‰

#### ğŸ“ æ•°æ®éªŒè¯å±‚ (`schemas/`)
```
app/schemas/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ token.py             # Token ç›¸å…³ Schemas
â””â”€â”€ user.py              # ç”¨æˆ· Schemasï¼ˆCreateã€Updateã€Responseï¼‰
```

**åŠŸèƒ½ï¼š**
- è¯·æ±‚æ•°æ®éªŒè¯
- å“åº”æ•°æ®åºåˆ—åŒ–
- API æ–‡æ¡£ç”Ÿæˆ

#### ğŸ”§ ä¸šåŠ¡é€»è¾‘å±‚ (`crud/`)
```
app/crud/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ base.py              # é€šç”¨ CRUD åŸºç±»ï¼ˆæ³›å‹ï¼‰
â””â”€â”€ user.py              # ç”¨æˆ· CRUD æ“ä½œ
```

**åŠŸèƒ½ï¼š**
- å°è£…æ•°æ®åº“æ“ä½œ
- ä¸šåŠ¡é€»è¾‘å¤„ç†
- äº‹åŠ¡ç®¡ç†

#### ğŸš€ åº”ç”¨å…¥å£
```
app/main.py              # FastAPI åº”ç”¨å®ä¾‹ã€ä¸­é—´ä»¶ã€å¯åŠ¨äº‹ä»¶
```

### ğŸ“š æ–‡æ¡£ (`docs/`)

```
docs/
â”œâ”€â”€ INDEX.md                      # ğŸ“‘ æ–‡æ¡£ç´¢å¼•å’Œå­¦ä¹ è·¯å¾„
â”œâ”€â”€ 00_é¡¹ç›®æ¦‚è§ˆ.md                # ğŸ—ï¸ é¡¹ç›®æ¶æ„å’Œæ ¸å¿ƒæ¦‚å¿µ
â”œâ”€â”€ 01_Modelså±‚_SQLAlchemy.md    # ğŸ’¾ æ•°æ®åº“å±‚è¯¦è§£
â”œâ”€â”€ 02_Schemaså±‚_Pydantic.md     # ğŸ“ æ•°æ®éªŒè¯å±‚è¯¦è§£
â”œâ”€â”€ 03_CRUDå±‚_ä¸šåŠ¡é€»è¾‘.md         # ğŸ”§ ä¸šåŠ¡é€»è¾‘å±‚è¯¦è§£
â”œâ”€â”€ 04_APIå±‚_FastAPIè·¯ç”±.md       # ğŸ”Œ API å±‚è¯¦è§£
â”œâ”€â”€ 05_è®¤è¯æˆæƒ_JWT.md            # ğŸ” è®¤è¯æˆæƒè¯¦è§£
â””â”€â”€ å­¦ä¹ æ€»ç»“.md                   # ğŸ“Š çŸ¥è¯†æ€»ç»“å’Œè¿›é˜¶æ–¹å‘
```

### ğŸ”§ å·¥å…·è„šæœ¬ (`scripts/`)

```
scripts/
â”œâ”€â”€ create_user.py       # åˆ›å»ºæµ‹è¯•ç”¨æˆ·
â””â”€â”€ run.py               # å¯åŠ¨åº”ç”¨
```

### ğŸ“„ é…ç½®æ–‡ä»¶

```
.
â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ .gitignore           # Git å¿½ç•¥è§„åˆ™
â”œâ”€â”€ pyproject.toml       # é¡¹ç›®ä¾èµ–å’Œé…ç½®
â”œâ”€â”€ uv.lock              # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ README.md            # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ QUICK_START.md       # å¿«é€Ÿå¼€å§‹æŒ‡å—
â””â”€â”€ PROJECT_SUMMARY.md   # æœ¬æ–‡ä»¶
```

### ğŸ“¦ æ•°æ®åº“

```
app.db                   # SQLite æ•°æ®åº“ï¼ˆåŒ…å«æµ‹è¯•ç”¨æˆ·ï¼‰
```

## ğŸ¯ å·²å®ç°çš„åŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ âœ…

**æ³¨å†Œ**
- `POST /api/v1/auth/register`
- é‚®ç®±å’Œç”¨æˆ·åå”¯ä¸€æ€§éªŒè¯
- å¯†ç è‡ªåŠ¨å“ˆå¸Œ

**ç™»å½•**
- `POST /api/v1/auth/login`
- OAuth2 å¯†ç æµ
- è¿”å› JWT token

**è·å–å½“å‰ç”¨æˆ·**
- `GET /api/v1/auth/me`
- JWT è®¤è¯ä¿æŠ¤
- è¿”å›ç”¨æˆ·ä¿¡æ¯

### 2. ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ âœ…

**åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰**
- `GET /api/v1/users/`
- éœ€è¦ç®¡ç†å‘˜æƒé™
- æ”¯æŒåˆ†é¡µ

**è¯¦æƒ…**
- `GET /api/v1/users/{user_id}`
- æƒé™æ£€æŸ¥ï¼ˆåªèƒ½æŸ¥çœ‹è‡ªå·±æˆ–ç®¡ç†å‘˜å¯æŸ¥çœ‹æ‰€æœ‰ï¼‰

**æ›´æ–°**
- `PUT /api/v1/users/{user_id}`
- å”¯ä¸€æ€§éªŒè¯
- éƒ¨åˆ†æ›´æ–°æ”¯æŒ

**åˆ é™¤**
- `DELETE /api/v1/users/{user_id}`
- éœ€è¦ç®¡ç†å‘˜æƒé™
- ä¸èƒ½åˆ é™¤è‡ªå·±

### 3. æƒé™ç³»ç»Ÿ âœ…

- æ™®é€šç”¨æˆ·ï¼ˆ`is_active=True, is_superuser=False`ï¼‰
- ç®¡ç†å‘˜ï¼ˆ`is_active=True, is_superuser=True`ï¼‰
- ç¦ç”¨ç”¨æˆ·ï¼ˆ`is_active=False`ï¼‰

### 4. å®‰å…¨ç‰¹æ€§ âœ…

- å¯†ç  bcrypt å“ˆå¸Œ
- JWT token è®¤è¯
- Token è‡ªåŠ¨è¿‡æœŸ
- CORS é…ç½®
- ç¯å¢ƒå˜é‡ç®¡ç†

## ğŸ“Š API ç«¯ç‚¹æ€»è§ˆ

| æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ | æƒé™ |
|------|------|------|------|
| POST | `/api/v1/auth/register` | ç”¨æˆ·æ³¨å†Œ | å…¬å¼€ |
| POST | `/api/v1/auth/login` | ç”¨æˆ·ç™»å½• | å…¬å¼€ |
| GET | `/api/v1/auth/me` | è·å–å½“å‰ç”¨æˆ· | éœ€è®¤è¯ |
| POST | `/api/v1/auth/test-token` | æµ‹è¯• token | éœ€è®¤è¯ |
| GET | `/api/v1/users/` | ç”¨æˆ·åˆ—è¡¨ | ç®¡ç†å‘˜ |
| GET | `/api/v1/users/{id}` | ç”¨æˆ·è¯¦æƒ… | éœ€è®¤è¯ |
| PUT | `/api/v1/users/{id}` | æ›´æ–°ç”¨æˆ· | éœ€è®¤è¯ |
| DELETE | `/api/v1/users/{id}` | åˆ é™¤ç”¨æˆ· | ç®¡ç†å‘˜ |
| GET | `/` | æ ¹è·¯å¾„ | å…¬å¼€ |
| GET | `/health` | å¥åº·æ£€æŸ¥ | å…¬å¼€ |
| GET | `/docs` | API æ–‡æ¡£ | å…¬å¼€ |
| GET | `/redoc` | ReDoc æ–‡æ¡£ | å…¬å¼€ |

## ğŸ§ª æµ‹è¯•è´¦å·

| ç”¨æˆ·å | å¯†ç  | è§’è‰² | ç”¨é€” |
|--------|------|------|------|
| `testuser` | `password123` | æ™®é€šç”¨æˆ· | æµ‹è¯•æ™®é€šåŠŸèƒ½ |
| `admin` | `admin123` | ç®¡ç†å‘˜ | æµ‹è¯•ç®¡ç†åŠŸèƒ½ |

## ğŸš€ å¿«é€Ÿå¯åŠ¨

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd fastapi-learning

# 2. å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
uv sync

# 3. å¯åŠ¨æœåŠ¡
uv run python scripts/run.py

# 4. è®¿é—® API æ–‡æ¡£
open http://localhost:8000/docs
```

## ğŸ“– å­¦ä¹ è·¯å¾„

### ğŸŒŸ åˆå­¦è€…ï¼ˆç¬¬1å¤©ï¼‰

**ä¸Šåˆï¼ˆ3-4å°æ—¶ï¼‰**
1. âœ… é˜…è¯» `QUICK_START.md`
2. âœ… å¯åŠ¨é¡¹ç›®ï¼Œæµ‹è¯• API
3. âœ… é˜…è¯» `docs/00_é¡¹ç›®æ¦‚è§ˆ.md`
4. âœ… é˜…è¯» `docs/01_Modelså±‚_SQLAlchemy.md`
5. âœ… æŸ¥çœ‹ `app/models/user.py`

**ä¸‹åˆï¼ˆ3-4å°æ—¶ï¼‰**
6. âœ… é˜…è¯» `docs/02_Schemaså±‚_Pydantic.md`
7. âœ… æŸ¥çœ‹ `app/schemas/user.py`
8. âœ… é˜…è¯» `docs/03_CRUDå±‚_ä¸šåŠ¡é€»è¾‘.md`
9. âœ… æŸ¥çœ‹ `app/crud/base.py` å’Œ `app/crud/user.py`

**æ™šä¸Šï¼ˆ2-3å°æ—¶ï¼‰**
10. âœ… é˜…è¯» `docs/04_APIå±‚_FastAPIè·¯ç”±.md`
11. âœ… æŸ¥çœ‹ `app/api/v1/endpoints/`
12. âœ… é˜…è¯» `docs/05_è®¤è¯æˆæƒ_JWT.md`
13. âœ… é€šè¿‡ Swagger UI æµ‹è¯•æ‰€æœ‰ API

### ğŸš€ è¿›é˜¶ç»ƒä¹ ï¼ˆç¬¬2å¤©ï¼‰

**å®æˆ˜ä»»åŠ¡ï¼šæ„å»ºåšå®¢ç³»ç»Ÿ**

1. **æ–‡ç« æ¨¡å‹**
   ```python
   class Post(Base):
       id, title, content, user_id, is_published, created_at, updated_at
   ```

2. **è¯„è®ºæ¨¡å‹**
   ```python
   class Comment(Base):
       id, content, user_id, post_id, created_at, updated_at
   ```

3. **æ ‡ç­¾æ¨¡å‹ï¼ˆå¤šå¯¹å¤šï¼‰**
   ```python
   class Tag(Base):
       id, name
   # å…³è”è¡¨ï¼špost_tags
   ```

4. **å®ç°åŠŸèƒ½**
   - æ–‡ç«  CRUD
   - è¯„è®º CRUD
   - æ ‡ç­¾ç®¡ç†
   - æ–‡ç« æœç´¢
   - æŒ‰æ ‡ç­¾è¿‡æ»¤
   - åˆ†é¡µåŠ è½½

## ğŸ’¡ æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. ä¸‰å±‚æ¶æ„
```
API å±‚ â†’ CRUD å±‚ â†’ Models å±‚
   â†“        â†“         â†“
FastAPI  ä¸šåŠ¡é€»è¾‘  SQLAlchemy
   â†‘
Pydantic Schemas
```

### 2. ä¾èµ–æ³¨å…¥
```python
DBSession = Annotated[Session, Depends(get_db)]
CurrentUser = Annotated[User, Depends(get_current_user)]
```

### 3. CRUD æ¨¡å¼
```python
# æ³›å‹åŸºç±»
CRUDBase[ModelType, CreateSchemaType, UpdateSchemaType]

# å…·ä½“å®ç°
CRUDUser(User, UserCreate, UserUpdate)
```

### 4. Schema è®¾è®¡
```python
UserBase â†’ å…±äº«å­—æ®µ
UserCreate â†’ åˆ›å»ºæ—¶è¾“å…¥
UserUpdate â†’ æ›´æ–°æ—¶è¾“å…¥
UserResponse â†’ è¿”å›ç»™å®¢æˆ·ç«¯
```

### 5. JWT è®¤è¯
```
ç™»å½• â†’ éªŒè¯å¯†ç  â†’ ç”Ÿæˆ token â†’ è¿”å› token
è¯·æ±‚ â†’ æºå¸¦ token â†’ éªŒè¯ token â†’ è¿”å›æ•°æ®
```

## ğŸ“ ä¸‹ä¸€æ­¥å­¦ä¹ 

### æŠ€æœ¯æ‰©å±•
- [ ] å­¦ä¹ å¼‚æ­¥ FastAPI
- [ ] æŒæ¡ Alembic æ•°æ®åº“è¿ç§»
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] å­¦ä¹  WebSocket
- [ ] å®ç°æ–‡ä»¶ä¸Šä¼ 
- [ ] æ·»åŠ åå°ä»»åŠ¡
- [ ] å­¦ä¹  Docker éƒ¨ç½²

### åŠŸèƒ½æ‰©å±•
- [ ] å®ç°é‚®ç®±éªŒè¯
- [ ] æ·»åŠ åˆ·æ–° token
- [ ] å®ç°å¿˜è®°å¯†ç 
- [ ] æ·»åŠ ç¤¾äº¤ç™»å½•
- [ ] å®ç°è§’è‰²æƒé™ç³»ç»Ÿ
- [ ] æ·»åŠ æ—¥å¿—è®°å½•
- [ ] å®ç°é€Ÿç‡é™åˆ¶

### é¡¹ç›®å®æˆ˜
- [ ] åšå®¢ç³»ç»Ÿ API
- [ ] åœ¨çº¿å•†åŸåç«¯
- [ ] ç¤¾äº¤åª’ä½“å¹³å°
- [ ] ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ
- [ ] å®æ—¶èŠå¤©åº”ç”¨

## ğŸ“š å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [FastAPI å®˜æ–¹æ–‡æ¡£](https://fastapi.tiangolo.com/)
- [Pydantic V2 æ–‡æ¡£](https://docs.pydantic.dev/latest/)
- [SQLAlchemy 2.0 æ–‡æ¡£](https://docs.sqlalchemy.org/en/20/)

### æ¨èæ•™ç¨‹
- FastAPI å®˜æ–¹æ•™ç¨‹
- Real Python - FastAPI
- TestDriven.io - FastAPI ç³»åˆ—

### å‚è€ƒé¡¹ç›®
- [Full Stack FastAPI Template](https://github.com/tiangolo/full-stack-fastapi-template)
- [FastAPI Best Practices](https://github.com/zhanymkanov/fastapi-best-practices)
- [Awesome FastAPI](https://github.com/mjhea0/awesome-fastapi)

## ğŸ‰ æ­å–œï¼

ä½ å·²ç»å®Œæˆäº†ä¸€ä¸ª**å®Œæ•´çš„ FastAPI å­¦ä¹ é¡¹ç›®**ï¼

**ä½ å·²æŒæ¡ï¼š**
âœ… FastAPI æ ¸å¿ƒæ¦‚å¿µ
âœ… SQLAlchemy ORM
âœ… Pydantic V2 æ•°æ®éªŒè¯
âœ… JWT è®¤è¯æˆæƒ
âœ… RESTful API è®¾è®¡
âœ… ä¸‰å±‚æ¶æ„æ¨¡å¼
âœ… ä¾èµ–æ³¨å…¥æ¨¡å¼

**ç°åœ¨ä½ å¯ä»¥ï¼š**
- ç‹¬ç«‹å¼€å‘ FastAPI é¡¹ç›®
- è®¾è®¡ RESTful API
- å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- æ„å»ºä¼ä¸šçº§åç«¯åº”ç”¨

## ğŸ“ è·å–å¸®åŠ©

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
2. é˜…è¯»é”™è¯¯ä¿¡æ¯
3. æ£€æŸ¥ Swagger UI
4. æŸ¥é˜…å®˜æ–¹æ–‡æ¡£
5. æœç´¢ GitHub Issues

## ğŸŒŸ ç»§ç»­å‰è¿›

å­¦ä¹ æ°¸æ— æ­¢å¢ƒï¼Œç»§ç»­æ¢ç´¢ï¼š
- å¾®æœåŠ¡æ¶æ„
- GraphQL
- gRPC
- äº‹ä»¶é©±åŠ¨æ¶æ„
- äº‘åŸç”Ÿåº”ç”¨

**åŠ æ²¹ï¼ä½ å·²ç»è¿ˆå‡ºäº†åšå®çš„ä¸€æ­¥ï¼** ğŸš€

